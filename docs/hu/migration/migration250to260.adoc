= v2.5.0 ‚Üí v2.6.0

coff:ee v2.5.0 -> v2.6.0 migr√°ci√≥s le√≠r√°s, √∫jdons√°gok, v√°ltoz√°sok le√≠r√°sa

== Global

=== Coffee BOM

üí• ***BREAKING CHANGE*** üí•

[source,text]
----
Glob√°lis v√°ltoz√°s, hogy a projekteken eddig a coffee-bom volt haszn√°lva a coffee dependency import√°l√°s√°hoz. Ez megv√°ltozott coffee-bom-project -re.

Ezut√°n a k√∂vetkez≈ë m√≥don kell import√°lni a projekt elemeit:

<dependencyManagement>
    <dependency>
        <groupId>hu.icellmobilsoft.coffee</groupId>
        <artifactId>coffee-bom-project</artifactId>
        <version>${version.hu.icellmobilsoft.coffee}</version>
        <type>pom</type>
        <scope>import</scope>
    </dependency>
</dependencyManagement>

Ez azzal is j√°r, hogy azon transitive dependency-k melyek eddig a coffee-bom miatt a projektekre ker√ºltek, √≠gy kiker√ºlnek.
Emiatt ezeket a dependency-ket a maven jelezni fogja hogy nem tal√°lja, √≠gy azokat defini√°lni kell a coffee-t felhaszn√°l√≥ projekten.
----

coffee-bom -> coffee-bom-project -re v√°ltozott

* Jandex index config fix.

=== Hibernate

* Bump hibernate-core https://github.com/hibernate/hibernate-orm/releases/tag/6.1.5[6.1.5.Final] -> https://github.com/hibernate/hibernate-orm/releases/tag/6.2.13[6.2.13.Final].

==== Migration

* Sz√ºks√©ges √°tn√©zni a https://github.com/hibernate/hibernate-orm/blob/6.2/migration-guide.adoc[Hibernate 6.2.x migr√°ci√≥s dokument√°ci√≥t] √©s az adott projektet √©rint≈ë r√©szeket lek√∂vetni.
* A https://github.com/hibernate/hibernate-orm/blob/6.2/migration-guide.adoc#timezone-and-offset-storage[timezone √©s offset t√°rol√°s] megv√°ltozott `DEFAULT` √©rt√©kre, ami miatt az id≈ëz√≥n√°k is ment√©sre ker√ºlnek.
Mivel eddig nem mentett√ºnk id≈ëz√≥n√°t √©s a `BatchService` is √∫gy van elk√©sz√≠tve, hogy ne mentsen, √≠gy ez probl√©m√°t okoz.
Ahhoz, hogy tov√°bbra se legyenek mentve id≈ëz√≥n√°k, sz√ºks√©ges a projekteken felvenni a `persistence.xml`-ben a k√∂vetkez≈ë property-t: `<property name="hibernate.timezone.default_storage" value="NORMALIZE"/>`.
* A https://github.com/hibernate/hibernate-orm/blob/6.2/migration-guide.adoc#bytecharacter-mapping-changes[Byte[+]+ √©s Character[+]+ t√≠pusok feldolgoz√°sa megv√°ltozott].
A Byte[] t√≠pusok eddig kezelve voltak, viszont a hibernate v√°ltoz√°sok miatt a k√∂vetkez≈ëk egyike sz√ºks√©ges:
** Byte[] lecser√©l√©se byte[]-ra
** A r√©gi m≈±k√∂d√©shez sz√ºks√©ges enged√©lyezni a `persistence.xml`-ben a legacy array feldolgoz√°st a k√∂vetkez≈ë property-vel: `<property name="hibernate.type.wrapper_array_handling" value="legacy"/>`

=== coffee-cdi √©s coffee-dto-base modulariz√°l√°s

* `hu.icellmobilsoft.coffee.dto.exception` package tartalma √°tker√ºlt a `coffee-exception` √∫j modulba a `hu.icellmobilsoft.coffee.exception` package al√°.
* `hu.icellmobilsoft.coffee.cdi.annotation.FaultTypeCode` √°tker√ºlt a `coffee-exception` √∫j modulba a `hu.icellmobilsoft.coffee.exception.annotation.FaultTypeCode` n√©ven.
* `hu.icellmobilsoft.coffee.dto.exception.enums.CoffeeFaultType` √°tker√ºlt a `coffee-exception` √∫j modulba a `hu.icellmobilsoft.coffee.exception.enums.CoffeeFaultType` n√©ven.
* `hu.icellmobilsoft.coffee.dto.exception.enums.Severity` √°tker√ºlt a `coffee-exception` √∫j modulba a `hu.icellmobilsoft.coffee.exception.enums.Severity` n√©ven.
* `hu.icellmobilsoft.coffee.tool.common.FunctionalInterfaces` oszt√°ly √°tker√ºlt a `coffee-util` √∫j modulba a `hu.icellmobilsoft.coffee.util.function.FunctionalInterfaces` n√©ven.

==== √Åt√°ll√°s

* `coffee-exception` f√ºgg≈ës√©g beh√∫z√°sa (ha tranzit√≠van nem kapjuk meg)
* `import hu.icellmobilsoft.coffee.dto.exception` cser√©je `import hu.icellmobilsoft.coffee.exception`-re
* `import hu.icellmobilsoft.coffee.cdi.annotation.FaultTypeCode` cser√©je `import hu.icellmobilsoft.coffee.exception.annotation.FaultTypeCode`-re
* `coffee-util` f√ºgg≈ës√©g beh√∫z√°sa (ha tranzit√≠van nem kapjuk meg)
* `import hu.icellmobilsoft.coffee.tool.common.FunctionalInterfaces` cser√©je `import hu.icellmobilsoft.coffee.util.function.FunctionalInterfaces`-re

== V√°ltoz√°sok

=== coffee-jpa

==== BatchService

* Hibernate 6.2.x v√°ltoz√°sok alapj√°n friss√≠t√©sre ker√ºltek az `Insert`, `Update` √©s `Delete` SQL utas√≠t√°sok √∂ssze√°ll√≠t√°sa.
* A Hibernate 6.2.x verzi√≥t√≥l deprecated lett az EnumType, mivel m√°shogy dolgozz√°k fel az enum √©rt√©keket, √≠gy a `BatchService`-ben l√©v≈ë EnumType lekezel√©se t√∂rl√©sre ker√ºlt.

==== Migration

A v√°ltoztat√°sok nem eredm√©nyeznek √°t√°ll√°si munk√°latokat, visszafel√© kompatibilis.

==== JpaUtil

** A Hibernate 6.2.x verzi√≥t√≥l √°tnevezt√©k a `JdbcSelect` oszt√°lyt `JdbcOperationQuerySelect` oszt√°lyra, illetve a bel≈ële haszn√°lt `getSql()` met√≥dust `getSqlString()` met√≥dusra, √≠gy ezt lek√∂vett√ºk a `JpaUtil` oszt√°lyban.

==== Migration

A v√°ltoztat√°sok nem eredm√©nyeznek √°t√°ll√°si munk√°latokat, visszafel√© kompatibilis.

==== Transactional annotation

A `hu.icellmobilsoft.coffee.jpa.annotation.Transactional` annot√°ci√≥b√≥l kiker√ºlt a @Stereotype annot√°ci√≥ √©s a @Target -b≈ël a ElementType.TYPE.

==== Migration

A v√°ltoztat√°sok nem eredm√©nyeznek √°t√°ll√°si munk√°latokat, visszafel√© kompatibilis.

=== coffee-rest

==== Jsonb Config

Beker√ºlt a Jsonb kongigur√°ci√≥j√°nak a defini√°l√°sa.

==== Migration

A v√°ltoztat√°sok nem eredm√©nyeznek √°t√°ll√°si munk√°latokat, visszafel√© default √©rt√©kek √°ll√≠t√≥dnak be a helyes haszn√°lhathoz.

=== coffee-module-mp-restclient

==== Jsonb Config

Beker√ºlt a Jsonb kongigur√°ci√≥j√°nak a defini√°l√°sa.

==== Migration

A v√°ltoztat√°sok nem eredm√©nyeznek √°t√°ll√°si munk√°latokat, visszafel√© default √©rt√©kek √°ll√≠t√≥dnak be a helyes haszn√°lhathoz.

=== coffee-rest

* fix javax.annotation.processing.Processor f√°jl (visszanevez√©se jakarta.annotation.processing.Processor-ra, mert ez nem v√°ltozott jakarta-ra)

=== Coffee Quarkus Extensions

√öj modul j√∂tt l√©tre Coffee Quarkus extension c√≠m alatt, ami a Quarkushoz sz√ºks√©ges egy√©b elemeket adja hozz√° a coffee egyes moduljaihoz.
Els≈ë eleme a coffee-module-mp-restclient-extension
M√°sodik eleme a coffee-deltaspike-data-extension

=== coffee-deltaspike-message

* Megv√°ltozott a `org.apache.deltaspike.core.util` pacakage-e, `org.apache.deltaspike.core.util.message` -ra, mivel 2 k√ºl√∂n modulban ugyan √∫gy szerepel az eredeti package, amire a Quarkus √©rz√©keny.

==== Migration

* `org.apache.deltaspike.core.util.ClassUtils` -> `org.apache.deltaspike.core.util.message.ClassUtils`
* `org.apache.deltaspike.core.util.PropertyFileUtils` -> `org.apache.deltaspike.core.util.message.PropertyFileUtils`

=== coffee-module-csv

√öj met√≥dusokkal, lehet≈ës√©g van a csv format √°ll√≠t√°s√°ra. Milyen csv szepar√°tor, escape char stb legyen haszn√°lva.

=== Migration

A v√°ltoztat√°sok nem eredm√©nyeznek √°t√°ll√°si munk√°latokat, visszafel√© kompatibilis.

=== coffee-model-base

* `AbstractEntity.toString()` fgv-e `java.io.InputStream`, `java.io.OutputStream`, `java.io.Reader` √©s `java.io.Writer` t√≠pus√∫ propertyk eset√©n annak visszat√©r√©si √©rt√©ke helyett a t√≠pus√°t haszn√°lja fel.
Kor√°bban az √©rt√©kkel dolgozott ilyen esetekben is, √≠gy pl logoz√°s eset√©n felolvasta a stream-et.

==== √Åt√°ll√°s

A v√°ltoztat√°sok nem eredm√©nyeznek √°t√°ll√°si munk√°latokat, visszafel√© kompatibilis.

=== coffee-cdi

* `hu.icellmobilsoft.coffee.cdi.trace.spi.ITraceHandler.runWithTrace()` fgv √°tnevez√©sre ker√ºlt `runWithTraceNoException()`-re, ebben a v√°ltozatban csak RTE-t dobhat a trace-elt fgv.
* A kor√°bbi `hu.icellmobilsoft.coffee.cdi.trace.spi.ITraceHandler.runWithTrace()` fgv-e mostant√≥l `java.util.function.Supplier` helyett
`hu.icellmobilsoft.coffee.util.function.FunctionalInterfaces.BaseExceptionSupplier` vagy `hu.icellmobilsoft.coffee.util.function.FunctionalInterfaces.BaseExceptionRunner` fgv-t v√°r,
amik dobhatnak  `hu.icellmobilsoft.coffee.exception.BaseException`-t.

==== √Åt√°ll√°s

Az `ITraceHandler.runWithTrace()` h√≠v√°sokn√°l le kell kezelni vagy tov√°bb kell dobn a `hu.icellmobilsoft.coffee.exception.BaseException`-t.
Ha olyan fgv-t trace-el√ºnk, ami csak RTE-t dobhat, akkor haszn√°ljuk a `runWithTraceNoException()` fgv-t.
